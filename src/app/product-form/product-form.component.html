<h2 class="text-center my-5">{{ isEditing ? 'Edit' : 'Create' }} Product</h2>

<div class="text-danger text-center" *ngIf="errorMessage">
  {{ errorMessage }}
</div>

<form
  *ngIf="!errorMessage"
  (ngSubmit)="onSubmit()"
  #productForm="ngForm"
  class="border rounded p-5 w-50 mb-5 mx-auto"
>
  <div class="form-group mb-3">
    <label for="name" class="form-label">Name</label>
    <input
      type="text"
      id="name"
      name="name"
      [(ngModel)]="product.name"
      required
      minlength="3"
      class="form-control"
    />
    <div
      *ngIf="productForm.controls['name']?.invalid && productForm.controls['name']?.touched"
      class="text-danger mt-2"
    >
      Name is required (minimum 3 characters).
    </div>
  </div>

  <div class="form-group mb-3">
    <label for="stock" class="form-label">Stock</label>
    <input
      type="number"
      id="stock"
      name="stock"
      [(ngModel)]="product.stock"
      required
      min="0"
      class="form-control"
    />
    <div
      *ngIf="productForm.controls['stock']?.invalid && productForm.controls['stock']?.touched"
      class="text-danger mt-2"
    >
      Stock is required and must be at least 0.
    </div>
  </div>

  <div class="form-group mb-3">
    <label for="price" class="form-label">Price</label>
    <input
      type="number"
      id="price"
      name="price"
      [(ngModel)]="product.price"
      required
      min="0.01"
      step="0.01"
      class="form-control"
    />
    <div
      *ngIf="productForm.controls['price']?.invalid && productForm.controls['price']?.touched"
      class="text-danger mt-2"
    >
      Price is required and must be at least 0.01.
    </div>
  </div>

  <div class="form-check mb-3">
    <input
      type="checkbox"
      id="isInPurchaseQueue"
      name="isInPurchaseQueue"
      [(ngModel)]="product.isInPurchaseQueue"
      class="form-check-input"
    />
    <label for="isInPurchaseQueue" class="form-check-label">
      Is In Purchase Queue
    </label>
  </div>

  <button
    class="btn btn-primary"
    type="submit"
    [disabled]="productForm.invalid"
  >
    {{ isEditing ? 'Edit' : 'Create' }}
  </button>
</form>
